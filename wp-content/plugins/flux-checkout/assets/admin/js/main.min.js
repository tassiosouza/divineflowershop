(()=>{"use strict";function e(){var t=document.getElementsByClassName("header-type");t.length&&Array.from(t).forEach(function(t){var o=t.closest(".wpsf-tab").getElementsByClassName("header-type--text"),c=t.closest(".wpsf-tab").getElementsByClassName("header-type--image");t.classList.contains("flux-field-init")||(t.classList.add("flux-field-init"),t.addEventListener("change",function(){e(),l()})),Array.from(o).forEach(function(e){e.closest("tr").style.display="text"===t.value?"":"none"}),Array.from(c).forEach(function(e){e.closest("tr").style.display="image"===t.value?"":"none"})})}function t(){var e=document.querySelectorAll(".header-background"),o=document.querySelectorAll(".header-background:checked");o.length&&(Array.from(e).forEach(function(e){e.classList.contains("flux-field-init")||(e.classList.add("flux-field-init"),e.addEventListener("change",function(){t(),l()}))}),Array.from(o).forEach(function(e){var t=e.closest(".wpsf-tab").getElementsByClassName("header-background--custom"),o=e.closest(".wpsf-tab").getElementsByClassName("header-background--gradient");Array.from(t).forEach(function(t){t.closest("tr").style.display="custom"===e.value?"":"none"}),Array.from(o).forEach(function(t){console.log(t.closest("tr")),console.log("gradient"===e.value?"":"none"),t.closest("tr").style.display="gradient"===e.value?"":"none"})}))}function o(){var e=document.querySelectorAll(".colour-type"),t=document.querySelectorAll(".colour-type:checked");t.length&&(Array.from(e).forEach(function(e){e.classList.contains("flux-field-init")||(e.classList.add("flux-field-init"),e.addEventListener("change",function(){o()}))}),Array.from(t).forEach(function(e){var t=e.closest(".wpsf-tab").getElementsByClassName("colour-type--palette"),o=e.closest(".wpsf-tab").getElementsByClassName("colour-type--primary");Array.from(t).forEach(function(t){t.closest("tr").style.display="mdl"===e.value?"":"none"}),Array.from(o).forEach(function(t){t.closest("tr").style.display="custom"===e.value?"":"none"})}))}function l(){"modern"===jQuery(".flux-theme-type:checked").val()&&(document.getElementById("styles_header_header_font_family").closest("tr").style.display="none",document.getElementById("styles_header_header_font_size").closest("tr").style.display="none",document.getElementById("styles_header_header_font_colour").closest("tr").style.display="none",document.getElementById("styles_header_header_background_primary-color").closest("tr").style.display="none",document.getElementById("styles_header_background").closest("tr").style.display="none",document.getElementById("styles_checkout_primary_color_#f44336").closest("tr").style.display="none",document.getElementById("styles_checkout_accent_color_#f44336").closest("tr").style.display="none",document.getElementById("styles_checkout_custom_primary_color").closest("tr").style.display="none",document.getElementById("styles_checkout_custom_accent_color").closest("tr").style.display="none",document.getElementById("styles_checkout_modern_custom_placeholder_color").closest("tr").style.display="",document.getElementById("styles_checkout_modern_custom_link_color").closest("tr").style.display="",document.getElementById("styles_checkout_modern_custom_primary_button_color").closest("tr").style.display="",document.getElementById("styles_checkout_modern_custom_secondary_button_color").closest("tr").style.display="",document.getElementById("styles_header_cart_icon_color").closest("tr").style.display="none",document.getElementById("styles_checkout_use_custom_colors_custom").closest("tr").style.display="none",document.getElementById("styles_theme_show_sidebar").closest("tr").style.display="none")}function c(){let e=jQuery(".flux-theme-type:checked").val();jQuery(".flux-theme-type").hasClass("flux-field-init")||(jQuery(".flux-theme-type").addClass("flux-field-init"),jQuery(".flux-theme-type").change(c),jQuery(".flux-theme-type").change(l)),"modern"!==e&&(document.getElementById("styles_header_header_font_family").closest("tr").style.display="",document.getElementById("styles_header_header_font_size").closest("tr").style.display="",document.getElementById("styles_header_header_font_colour").closest("tr").style.display="",document.getElementById("styles_header_header_background_primary-color").closest("tr").style.display="",document.getElementById("styles_header_background").closest("tr").style.display="",document.getElementById("styles_checkout_primary_color_#f44336").closest("tr").style.display="",document.getElementById("styles_checkout_accent_color_#f44336").closest("tr").style.display="",document.getElementById("styles_checkout_custom_primary_color").closest("tr").style.display="",document.getElementById("styles_checkout_custom_accent_color").closest("tr").style.display="",document.getElementById("styles_checkout_modern_custom_placeholder_color").closest("tr").style.display="none",document.getElementById("styles_checkout_modern_custom_link_color").closest("tr").style.display="none",document.getElementById("styles_checkout_modern_custom_primary_button_color").closest("tr").style.display="none",document.getElementById("styles_checkout_modern_custom_secondary_button_color").closest("tr").style.display="none",document.getElementById("styles_header_cart_icon_color").closest("tr").style.display="",document.getElementById("styles_checkout_use_custom_colors_custom").closest("tr").style.display="",document.getElementById("styles_theme_show_sidebar").closest("tr").style.display="")}const n=window.React,s=window.wp.element,r=window.wp.components,u=window.wp.i18n,a=e=>{var t=iconic_flux_checkout.flux_url+"images/elements/onboarding/";let o=(0,u.sprintf)((0,u.__)("Not quite sure where to start? We've got you covered! Check out our %1s documentation%2s to learn more about Flux Checkout Elements."),'<a href="https://iconicwp.com/docs/flux-checkout-for-woocommerce/how-to-use-checkout-elements/" target="_blank">',"</a>");return(0,n.createElement)(r.Guide,{className:"edit-post-welcome-guide",onFinish:e.onFinish,pages:[{image:(0,n.createElement)("picture",{className:"edit-post-welcome-guide__image"},(0,n.createElement)("img",{src:t+"onboarding-1.png"})),content:(0,n.createElement)(n.Fragment,null,(0,n.createElement)("h1",{className:"edit-post-welcome-guide__heading"},(0,u.__)("Welcome to Flux Checkout Elements!","flux-checkout")),(0,n.createElement)("p",{className:"edit-post-welcome-guide__text"},(0,u.__)("Checkout Elements allow you to spruce up your WooCommerce checkout process by adding tailored elements like Trust Badges, Testimonials, or anything else that compliments your brand and enhances customer experience.","flux-checkout")))},{image:(0,n.createElement)("picture",{className:"edit-post-welcome-guide__image"},(0,n.createElement)("img",{src:t+"onboarding-2.png"})),content:(0,n.createElement)(n.Fragment,null,(0,n.createElement)("h1",{className:"edit-post-welcome-guide__heading"},(0,u.__)("Position Flexibility","flux-checkout")),(0,n.createElement)("p",{className:"edit-post-welcome-guide__text"},(0,u.__)("Place the Element anywhere you like. With Flux Checkout Elements, your options are limitless. You can determine the positioning, whether itâ€™s after the checkout header, before the footer, or anywhere in between.","flux-checkout")))},{image:(0,n.createElement)("picture",{className:"edit-post-welcome-guide__image"},(0,n.createElement)("img",{src:t+"onboarding-3.png"})),content:(0,n.createElement)(n.Fragment,null,(0,n.createElement)("h1",{className:"edit-post-welcome-guide__heading"},(0,u.__)("Add conditional rules","flux-checkout")),(0,n.createElement)("p",{className:"edit-post-welcome-guide__text"},(0,u.__)("Show or hide specific Elements based on factors like cart products, categories, user roles, or purchase amount.","flux-checkout")))},{image:(0,n.createElement)("picture",{className:"edit-post-welcome-guide__image"},(0,n.createElement)("img",{src:t+"onboarding-4.png"})),content:(0,n.createElement)(n.Fragment,null,(0,n.createElement)("h1",{className:"edit-post-welcome-guide__heading"},(0,u.__)("Learn more about Checkout Elements","flux-checkout")),(0,n.createElement)("p",{className:"edit-post-welcome-guide__text",dangerouslySetInnerHTML:{__html:o}}))}]})},{__}=wp.i18n,i=e=>{const[t,o]=(0,s.useState)(e.defaultOpenPopup);return(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"fce-welcome-guide-button"},(0,n.createElement)(r.Button,{variant:"default",onClick:()=>o(!0)},__("Welcome Guide","flux-checkout")),t&&(0,n.createElement)(a,{...e,onFinish:()=>{const e={action:"flux_elements_welcome_guide_seen",nonce:iconic_flux_checkout.nonce};jQuery.post(iconic_flux_checkout.ajax_url,e),window.fce_show_welcome_screen=!1,o(!1)}})))};function d(){pagenow.includes("iconic-flux-settings")&&(function(){if(jQuery("#styles_checkout_custom_css_ace_editor").length){var e=ace.edit("styles_checkout_custom_css_ace_editor"),t=document.getElementById("styles_checkout_custom_css");e.setTheme("ace/theme/chrome"),e.session.setMode("ace/mode/css"),e.setOptions({showPrintMargin:!1}),e.getSession().setValue(t.value),e.getSession().on("change",function(){t.value=e.getSession().getValue()})}}(),c(),e(),t(),o(),l(),function(){const e=function(e){return`<span class='flux-gradient-preview-dot' style='background: linear-gradient(to left, ${jQuery(e.element).attr("value")} )'></span> ${e.text}`};jQuery("#styles_header_background").select2({templateSelection:e,templateResult:e,escapeMarkup:function(e){return e}})}())}!function(){if("checkout_elements"!==pagenow||!jQuery("body").hasClass("block-editor-page"))return;const{PluginDocumentSettingPanel:e}=wp.editPost,t=()=>"checkout_elements"!==pagenow?null:(0,n.createElement)(e,{name:"flux-welcome-guide",title:(0,u.__)("Flux Checkout Elements","flux-checkout"),className:"welcome-guide"},(0,n.createElement)(i,{defaultOpenPopup:window.fce_show_welcome_screen}));if(wp.plugins.registerPlugin){const{registerPlugin:e}=wp.plugins;e("flux-checkout-elements-onboarding-welcome-guide",{render:t,icon:"welcome-view-site"})}}(),document.addEventListener("DOMContentLoaded",function(){d(),Vue.createApp({el:".flux-ce",data:function(){return{productOptions:[],categoryOptions:[],enable_rules:!1,rule_condition:"show",rules:[]}},mounted:function(){this.categoryOptions=jQuery(".flux-ce").data("categories");var e=jQuery(".flux-ce").data("settings");e&&(this.rules=e.rules?e.rules:this.rules,this.rule_condition=e.rule_condition?e.rule_condition:this.rule_condition,this.enable_rules=e.enable_rules?e.enable_rules:this.enable_rules,this.rules.forEach(e=>{e.collapsed=!0,e.forEach(e=>{e.error=!1,e.is_dirty=!1})}))},components:{vSelect:window["vue-select"]},methods:{addOrRule:function(){this.rules.push([this.getEmptyRule()])},addAndRule:function(e){e.push(this.getEmptyRule())},getEmptyRule:function(){return{id:this.generateRandomId(),object:"user_role",condition:"is",value:"",product_options:[],product_cat_options:[],collapsed:!1,error:!1}},deleteOrRule:function(e){this.rules.splice(e,1)},deleteAndRule:function(e,t){this.rules[t]=this.rules[t].filter(t=>t.id!=e),0===this.rules[t].length&&this.rules.splice(t,1)},isLastRule:function(e){return 1===e.length},generateRandomId:function(){let e=" ";for(let t=0;t<20;t++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return e},fetchProducts:function(e,t){if(!e||e.length<3)t(!1);else{var o=this,l={security:window.iconic_flux_checkout.search_products_nonce,action:"woocommerce_json_search_products",term:e};jQuery.get(window.iconic_flux_checkout.ajax_url,l).done(function(e){var l=[];if(e){for(var c in e)l.push({code:c,label:e[c]});o.productOptions=l,t(!1)}})}},collapseRuleGroup:function(e){if(!e.collapsed){this.markDirtyOrClean(e,"dirty");var t=this.validateOrRule(e)}t||(e.collapsed=!e.collapsed)},validateOrRule:function(e){if(!e)return!1;var t=!1;return e.forEach(e=>{let o=this.validateAndRule(e);o?(e.error=o,t=!0):e.error=!1}),t},validateAndRule:function(e){return"product"===e.object&&0===e.value.length?iconic_flux_checkout.i18n.product_required:"product_cat"===e.object&&0===e.value.length?iconic_flux_checkout.i18n.product_cat_required:"cart_total"!==e.object||e.value?"user_role"===e.object&&!e.value&&iconic_flux_checkout.i18n.user_role_required:iconic_flux_checkout.i18n.cart_total_required},expandRuleGroup:function(e){e.collapsed=!1},getParentRuleSummary:function(e){let t=[];for(var o=0;o<e.length;o++)t.push(this.getSingleRuleSummary(e[o],o));return t},getSingleRuleSummary:function(e,t){let o="",l=e.value,c="<strong>"+this.convert_literal_to_text(e.object,e)+"</strong>",n=0!=t?this.convert_literal_to_text("And",e)+" ":"";return"product"!==e.object&&"product_cat"!==e.object||e.value.length>0&&(l=e.value.map(e=>e.label).join(", ")),o=n+c+" "+this.convert_literal_to_text(e.condition,e)+" "+l,o},convert_literal_to_text:function(e,t){const o={user_role:iconic_flux_checkout.literals.user_role,product:iconic_flux_checkout.literals.product,product_cat:iconic_flux_checkout.literals.product_cat,cart_total:iconic_flux_checkout.literals.cart_total,is:iconic_flux_checkout.literals.is,is_not:iconic_flux_checkout.literals.is_not,"<":iconic_flux_checkout.literals.lt,"<=":iconic_flux_checkout.literals.lte,">":iconic_flux_checkout.literals.gt,">=":iconic_flux_checkout.literals.gte,and:iconic_flux_checkout.literals.and};"product"!==t.object&&"product_cat"!==t.object||(o.is=iconic_flux_checkout.literals.in_cart,o.is_not=iconic_flux_checkout.literals.not_in_cart);let l=o[e];return l||(l=e),l},objectChanged:function(e){e.value="",this.validateOrRule(e),this.markDirtyOrClean(e,"clean")},markDirtyOrClean:function(e,t="clean"){e.forEach(e=>{e.is_dirty="clean"!==t})}},computed:{settings:function(){var e={enable_rules:this.enable_rules,rule_condition:this.rule_condition,rules:this.rules};return JSON.stringify(e)}}}).mount(".flux-ce")})})();