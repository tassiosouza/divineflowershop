(()=>{"use strict";const t=window.ReactJSXRuntime,{useState:o,useEffect:e}=wp.element,{getSetting:a}=wc.wcSettings,r=JSON.parse('{"name":"wpslash-tipping/checkout-actions-block","title":"Tipping for WooCommerce","apiVersion":2,"description":"Allow customers to add a Tip to  their order.","category":"woocommerce","textdomain":"wpslash-tipping","supports":{"align":true,"color":true,"anchor":true,"html":false,"layout":true,"typography":{"fontSize":true,"lineHeight":true},"spacing":{"margin":["top","bottom"],"padding":true,"blockGap":["horizontal","vertical"]}},"parent":["woocommerce/checkout-totals-block","woocommerce/checkout-order-summary-block","woocommerce/cart-totals-block"],"attributes":{"className":{"type":"string","default":""}}}'),{registerCheckoutBlock:n}=wc.blocksCheckout;n({metadata:r,component:e=>{var{cart:r,className:n}=e;const c=a("wc-tipping-blocks_data"),s=r?r.cartFees.find((t=>"tip"===t.key)):null,[l,p]=o(s?s.totals.total/100:c.default_tip_amount),[i,u]=o(!1),b=t=>{u(!0),wc.blocksCheckout.extensionCartUpdate({namespace:"wpslash-tipping-for-woocommerce",data:{percentage:t}}).then((t=>{console.log(t),p(t.fees.find((t=>"tip"===t.key)).totals.total/100),u(!1)}))};return(0,t.jsx)("div",{className:n,children:(0,t.jsxs)("div",{className:"wpslash-tip-wrapper ",style:{background:c.body_background_color||void 0},children:[(0,t.jsx)("div",{className:"wpslash-tip-title",style:{background:c.title_background_color||void 0,color:c.title_text_color||void 0},children:c.title}),(0,t.jsxs)("div",{className:"wpslash-tipping-form-wrapper",children:[(0,t.jsx)("input",{type:"number",value:l,className:"wpslash-tip-input",onInput:t=>{return o=t.target.value,void p(parseInt(o));var o}}),(0,t.jsx)("a",{className:i?"wpslash-tip-submit button loading":"wpslash-tip-submit button",onClick:t=>{t.preventDefault(),u(!0),wc.blocksCheckout.extensionCartUpdate({namespace:"wpslash-tipping-for-woocommerce",data:{amount:l}}).then((t=>{u(!1),p(t.fees.find((t=>"tip"===t.key)).totals.total/100),console.log(t)}))},style:r&&r.cartFees.some((t=>"tip"===t.key))?{display:"None"}:{background:c.buttons_background_color,color:c.buttons_text_color,borderColor:c.buttons_background_color},children:"Add"}),(0,t.jsx)("a",{className:i?"wpslash-tip-submit button loading":"wpslash-tip-submit button",onClick:t=>{t.preventDefault(),u(!0),wc.blocksCheckout.extensionCartUpdate({namespace:"wpslash-tipping-for-woocommerce",data:{remove_tip:!0}}).then((t=>{u(!1),p(t.fees.find((t=>"tip"===t.key)).totals.total/100),console.log(t)}))},style:r&&r.cartFees.some((t=>"tip"===t.key))?{background:c.buttons_background_color,color:c.buttons_text_color,borderColor:c.buttons_background_color}:{display:"None"},children:"Remove"})]}),(0,t.jsx)("div",{className:"wpslash-percentage-tip-buttons",children:c.tipping_percentage_enabled&&c.tip_percentages.map((function(o,e){return"percentage"==c.tipping_percentage_display?((o,e)=>(0,t.jsxs)("a",{onClick:t=>{t.preventDefault(),b(o)},className:i?"wpslash-tip-percentage-btn button loading":"wpslash-tip-percentage-btn button",percentage:o,style:{background:c.buttons_background_color,color:c.buttons_text_color,borderColor:c.buttons_background_color},children:[o,"%"]},e))(o,e):"amount"==c.tipping_percentage_display?((o,e)=>(0,t.jsx)("a",{onClick:t=>{t.preventDefault(),b(o)},className:i?"wpslash-tip-percentage-btn button loading":"wpslash-tip-percentage-btn button",percentage:o,style:{background:c.buttons_background_color,color:c.buttons_text_color,borderColor:c.buttons_background_color},children:r?.cartTotals?r.cartTotals.currency_prefix+(r.cartTotals.total_price-r.cartTotals.total_fees)/100*(o/100)+r.cartTotals.currency_suffix:"$"+o},e))(o,e):"percentage-amount"==c.tipping_percentage_display?((o,e)=>(0,t.jsxs)("a",{onClick:t=>{t.preventDefault(),b(o)},className:i?"wpslash-tip-percentage-btn button loading":"wpslash-tip-percentage-btn button",percentage:o,style:{background:c.buttons_background_color,color:c.buttons_text_color,borderColor:c.buttons_background_color},children:[o,"% ",r?.cartTotals?"("+r.cartTotals.currency_prefix+(r.cartTotals.total_price-r.cartTotals.total_fees)/100*(o/100)+r.cartTotals.currency_suffix+")":"($"+o+")"]},e))(o,e):void 0}))}),(0,t.jsx)("div",{className:"wpslash-percentage-tip-buttons",children:c.tipping_buttons_enabled&&c.tip_buttons.map((function(o,e){return"percentage"==c.tipping_percentage_display?((o,e)=>{const a=r.cartTotals?100*o/((r.cartTotals.total_price-r.cartTotals.total_fees)/100):o;return(0,t.jsxs)("a",{onClick:t=>{t.preventDefault(),b(o)},className:i?"wpslash-tip-percentage-btn button loading":"wpslash-tip-percentage-btn button",amount:o,style:{background:c.buttons_background_color,color:c.buttons_text_color,borderColor:c.buttons_background_color},children:[a,"%"]},e)})(o,e):"amount"==c.tipping_percentage_display?((o,e)=>(0,t.jsx)("a",{onClick:t=>{t.preventDefault(),b(o)},className:i?"wpslash-tip-percentage-btn button loading":"wpslash-tip-percentage-btn button",amount:o,style:{background:c.buttons_background_color,color:c.buttons_text_color,borderColor:c.buttons_background_color},children:r?.cartTotals?r.cartTotals.currency_prefix+o+r.cartTotals.currency_suffix:"$"+percentage},e))(o,e):"percentage-amount"==c.tipping_percentage_display?((o,e)=>{const a=r?.cartTotals?Math.ceil(100*o/((r?.cartTotals.total_price-r?.cartTotals.total_fees)/100)):o;return(0,t.jsxs)("a",{onClick:t=>{t.preventDefault(),b(o)},className:i?"wpslash-tip-percentage-btn button loading":"wpslash-tip-percentage-btn button",amount:o,style:{background:c.buttons_background_color,color:c.buttons_text_color,borderColor:c.buttons_background_color},children:[a,"% ",r?.cartTotals?"("+r.cartTotals.currency_prefix+o+r.cartTotals.currency_suffix+")":"($"+o+")"]},e)})(o,e):void 0}))})]})})}})})();