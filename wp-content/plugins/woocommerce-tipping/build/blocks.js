(()=>{"use strict";const t=window.ReactJSXRuntime,{useState:e,useEffect:o}=wp.element,{getSetting:a}=wc.wcSettings,r=o=>{var{cart:r,className:n}=o;const s=a("wc-tipping-blocks_data"),l=r?r.cartFees.find((t=>"tip"===t.key)):null,[c,i]=e(l?l.totals.total/100:s.default_tip_amount),[p,u]=e(!1),d=t=>{u(!0),wc.blocksCheckout.extensionCartUpdate({namespace:"wpslash-tipping-for-woocommerce",data:{percentage:t}}).then((t=>{console.log(t),i(t.fees.find((t=>"tip"===t.key)).totals.total/100),u(!1)}))};return(0,t.jsx)("div",{className:n,children:(0,t.jsxs)("div",{className:"wpslash-tip-wrapper ",style:{background:s.body_background_color||void 0},children:[(0,t.jsx)("div",{className:"wpslash-tip-title",style:{background:s.title_background_color||void 0,color:s.title_text_color||void 0},children:s.title}),(0,t.jsxs)("div",{className:"wpslash-tipping-form-wrapper",children:[(0,t.jsx)("input",{type:"number",value:c,className:"wpslash-tip-input",onInput:t=>{return e=t.target.value,void i(parseInt(e));var e}}),(0,t.jsx)("a",{className:p?"wpslash-tip-submit button loading":"wpslash-tip-submit button",onClick:t=>{t.preventDefault(),u(!0),wc.blocksCheckout.extensionCartUpdate({namespace:"wpslash-tipping-for-woocommerce",data:{amount:c}}).then((t=>{u(!1),i(t.fees.find((t=>"tip"===t.key)).totals.total/100),console.log(t)}))},style:r&&r.cartFees.some((t=>"tip"===t.key))?{display:"None"}:{background:s.buttons_background_color,color:s.buttons_text_color,borderColor:s.buttons_background_color},children:"Add"}),(0,t.jsx)("a",{className:p?"wpslash-tip-submit button loading":"wpslash-tip-submit button",onClick:t=>{t.preventDefault(),u(!0),wc.blocksCheckout.extensionCartUpdate({namespace:"wpslash-tipping-for-woocommerce",data:{remove_tip:!0}}).then((t=>{u(!1),i(t.fees.find((t=>"tip"===t.key)).totals.total/100),console.log(t)}))},style:r&&r.cartFees.some((t=>"tip"===t.key))?{background:s.buttons_background_color,color:s.buttons_text_color,borderColor:s.buttons_background_color}:{display:"None"},children:"Remove"})]}),(0,t.jsx)("div",{className:"wpslash-percentage-tip-buttons",children:s.tipping_percentage_enabled&&s.tip_percentages.map((function(e,o){return"percentage"==s.tipping_percentage_display?((e,o)=>(0,t.jsxs)("a",{onClick:t=>{t.preventDefault(),d(e)},className:p?"wpslash-tip-percentage-btn button loading":"wpslash-tip-percentage-btn button",percentage:e,style:{background:s.buttons_background_color,color:s.buttons_text_color,borderColor:s.buttons_background_color},children:[e,"%"]},o))(e,o):"amount"==s.tipping_percentage_display?((e,o)=>(0,t.jsx)("a",{onClick:t=>{t.preventDefault(),d(e)},className:p?"wpslash-tip-percentage-btn button loading":"wpslash-tip-percentage-btn button",percentage:e,style:{background:s.buttons_background_color,color:s.buttons_text_color,borderColor:s.buttons_background_color},children:r?.cartTotals?r.cartTotals.currency_prefix+(r.cartTotals.total_price-r.cartTotals.total_fees)/100*(e/100)+r.cartTotals.currency_suffix:"$"+e},o))(e,o):"percentage-amount"==s.tipping_percentage_display?((e,o)=>(0,t.jsxs)("a",{onClick:t=>{t.preventDefault(),d(e)},className:p?"wpslash-tip-percentage-btn button loading":"wpslash-tip-percentage-btn button",percentage:e,style:{background:s.buttons_background_color,color:s.buttons_text_color,borderColor:s.buttons_background_color},children:[e,"% ",r?.cartTotals?"("+r.cartTotals.currency_prefix+(r.cartTotals.total_price-r.cartTotals.total_fees)/100*(e/100)+r.cartTotals.currency_suffix+")":"($"+e+")"]},o))(e,o):void 0}))}),(0,t.jsx)("div",{className:"wpslash-percentage-tip-buttons",children:s.tipping_buttons_enabled&&s.tip_buttons.map((function(e,o){return"percentage"==s.tipping_percentage_display?((e,o)=>{const a=r.cartTotals?100*e/((r.cartTotals.total_price-r.cartTotals.total_fees)/100):e;return(0,t.jsxs)("a",{onClick:t=>{t.preventDefault(),d(e)},className:p?"wpslash-tip-percentage-btn button loading":"wpslash-tip-percentage-btn button",amount:e,style:{background:s.buttons_background_color,color:s.buttons_text_color,borderColor:s.buttons_background_color},children:[a,"%"]},o)})(e,o):"amount"==s.tipping_percentage_display?((e,o)=>(0,t.jsx)("a",{onClick:t=>{t.preventDefault(),d(e)},className:p?"wpslash-tip-percentage-btn button loading":"wpslash-tip-percentage-btn button",amount:e,style:{background:s.buttons_background_color,color:s.buttons_text_color,borderColor:s.buttons_background_color},children:r?.cartTotals?r.cartTotals.currency_prefix+e+r.cartTotals.currency_suffix:"$"+percentage},o))(e,o):"percentage-amount"==s.tipping_percentage_display?((e,o)=>{const a=r?.cartTotals?Math.ceil(100*e/((r?.cartTotals.total_price-r?.cartTotals.total_fees)/100)):e;return(0,t.jsxs)("a",{onClick:t=>{t.preventDefault(),d(e)},className:p?"wpslash-tip-percentage-btn button loading":"wpslash-tip-percentage-btn button",amount:e,style:{background:s.buttons_background_color,color:s.buttons_text_color,borderColor:s.buttons_background_color},children:[a,"% ",r?.cartTotals?"("+r.cartTotals.currency_prefix+e+r.cartTotals.currency_suffix+")":"($"+e+")"]},o)})(e,o):void 0}))})]})})},{__}=wp.i18n,{registerBlockType:n}=wp.blocks,{useBlockProps:s,useInnerBlocksProps:l}=wp.blockEditor,{BlockControls:c,InspectorControls:i,ServerSideRender:p,PlainText:u,MediaUpload:d,PanelColorSettings:g,ColorPalette:b}=wp.editor,{TextControl:C,Panel:_,PanelBody:h,PanelRow:m,Button:k,Grid:w,BoxControl:x,Modal:f,FormToggle:y,Disabled:L}=wp.components,{useState:v,useEffect:j}=wp.element,{withDispatch:T}=wp.data,{compose:F}=wp.compose,N=JSON.parse('{"name":"wpslash-tipping/checkout-actions-block","title":"Tipping for WooCommerce","apiVersion":2,"description":"Allow customers to add a Tip to  their order.","category":"woocommerce","textdomain":"wpslash-tipping","supports":{"align":true,"color":true,"anchor":true,"html":false,"layout":true,"typography":{"fontSize":true,"lineHeight":true},"spacing":{"margin":["top","bottom"],"padding":true,"blockGap":["horizontal","vertical"]}},"parent":["woocommerce/checkout-totals-block","woocommerce/checkout-order-summary-block","woocommerce/cart-totals-block"],"attributes":{"className":{"type":"string","default":""}}}'),S=(0,t.jsx)("svg",{width:"20px",height:"20px",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("g",{id:"Artboard-Copy",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd",children:(0,t.jsx)("g",{id:"tip-2-2",transform:"translate(5.000000, 2.000000)","fill-rule":"nonzero",children:(0,t.jsxs)("g",{id:"tip-2",children:[(0,t.jsx)("path",{d:"M9.52439024,2.1424991 C9.29120626,2.1421692 9.06129275,2.19724966 8.85365854,2.30318654 L8.85365854,0.401718582 C8.85365854,0.179855536 8.67348045,0 8.45121951,0 L0.402439024,0 C0.180178088,0 0,0.179855536 0,0.401718582 L0,14.8635875 C0,15.0854506 0.180178088,15.2653061 0.402439024,15.2653061 L1.98576829,15.2653061 C2.52610179,16.2556387 3.56541409,16.8721805 4.69512195,16.8721805 L7.91463415,16.8721805 C9.37964574,16.8692493 10.6416783,15.840843 10.9378232,14.4086412 L10.9385274,14.4049588 C10.9794884,14.2033175 11,13.9980831 11,13.792338 L11,3.61546724 C10.9990944,2.80234415 10.3389716,2.14340312 9.52439024,2.1424991 Z M9.05001524,3.14194146 C9.24184651,2.95037599 9.5304081,2.89305622 9.78109417,2.9967202 C10.0317802,3.10038418 10.1951997,3.34460765 10.195122,3.61546724 L10.195122,10.4825786 L8.85365578,9.85549588 L8.85365578,3.61546724 C8.85314727,3.43778616 8.92385029,3.26728168 9.05001524,3.14194146 L9.05001524,3.14194146 Z M7.91463415,16.0687433 L4.69512195,16.0687433 C4.02541295,16.0687433 3.38953916,15.7749638 2.95614939,15.2653061 L6.84146341,15.2653061 C7.06372435,15.2653061 7.24390244,15.0854506 7.24390244,14.8635875 C7.24390244,13.8547383 7.80342683,13.1876511 8.17367073,12.7461958 C8.27088957,12.6362356 8.36084545,12.5200838 8.44296951,12.3984749 C8.54988807,12.2279248 8.51392576,12.0047251 8.35882622,11.8762408 C8.12946951,11.6861944 6.78505488,10.9262433 6.50539329,10.7657902 C6.21855488,10.6012195 6.05935671,10.4125791 6.0191128,10.1890897 C5.97595122,9.95010061 6.07277134,9.68694146 6.17780793,9.49200752 L10.195122,11.3697071 L10.195122,13.7722521 L10.1455213,14.2643573 C9.92028148,15.3151377 8.99112475,16.0666582 7.91463415,16.0687433 L7.91463415,16.0687433 Z",id:"Shape",fill:"#000000"}),(0,t.jsx)("path",{d:"M0.804878049,0.803437164 L8.04878049,0.803437164 L8.04878049,10.325674 L6.20577744,8.61810222 C6.18231187,8.60720317 6.15783726,8.59861483 6.13270122,8.59245918 C6.32790024,8.4151642 6.43912499,8.16390397 6.43902439,7.90046545 L6.43902439,7.76655926 L6.57317073,7.76655926 C6.79543167,7.76655926 6.97560976,7.58670372 6.97560976,7.36484067 C6.97560976,7.14297763 6.79543167,6.96312209 6.57317073,6.96312209 L6.43137805,6.96312209 C6.35945584,6.32821498 5.80363182,5.85969119 5.16452438,5.89524619 C4.52541695,5.93080119 4.02519032,6.45807547 4.02439024,7.09702828 L4.02439024,7.63265306 C4.02439024,7.85451611 3.84421216,8.03437164 3.62195122,8.03437164 C3.39969028,8.03437164 3.2195122,7.85451611 3.2195122,7.63265306 L3.2195122,6.8292159 C3.2195122,6.75526155 3.27957156,6.6953097 3.35365854,6.6953097 C3.57591947,6.6953097 3.75609756,6.51545417 3.75609756,6.29359112 C3.75609756,6.07172807 3.57591947,5.89187254 3.35365854,5.89187254 C2.83529485,5.89246288 2.41522555,6.31178018 2.41463415,6.8292159 L2.41463415,6.96312209 L2.2804878,6.96312209 C2.05822687,6.96312209 1.87804878,7.14297763 1.87804878,7.36484067 C1.87804878,7.58670372 2.05822687,7.76655926 2.2804878,7.76655926 L2.42228049,7.76655926 C2.4942027,8.40146637 3.05002672,8.86999015 3.68913415,8.83443516 C4.32824158,8.79888016 4.82846821,8.27160588 4.82926829,7.63265306 L4.82926829,7.09702828 C4.82926829,6.87516524 5.00944638,6.6953097 5.23170732,6.6953097 C5.45396825,6.6953097 5.63414634,6.87516524 5.63414634,7.09702828 L5.63414634,7.90046545 C5.63414634,7.9744198 5.57408698,8.03437164 5.5,8.03437164 C5.27773906,8.03437164 5.09756098,8.21422718 5.09756098,8.43609023 C5.09756098,8.65795327 5.27773906,8.83780881 5.5,8.83780881 C5.54936116,8.83779072 5.59864437,8.83389542 5.64739329,8.82615897 C5.47390854,9.06498067 5.10899695,9.661901 5.22593902,10.325674 C5.3082378,10.7928392 5.60379573,11.1753423 6.1043628,11.4625041 C6.38607012,11.6242293 7.35024695,12.1691606 7.52078049,12.2731053 C7.16707012,12.6957802 7.35212021,13.4185054 7.22857143,14.461869 L0.804878049,14.461869 L0.804878049,0.803437164 Z",id:"Path",stroke:"#FFFFFF","stroke-width":"0.3",fill:"#000000"}),(0,t.jsx)("path",{d:"M1.9755102,5.62406015 C2.19867833,5.62406015 2.37959184,5.4509492 2.37959184,5.23740602 L2.37959184,4.03858487 C3.17236661,3.88218683 3.79186087,3.28941053 3.95530816,2.53082707 L4.84469184,2.53082707 C5.00813913,3.28941053 5.62763339,3.88218683 6.42040816,4.03858487 L6.42040816,5.23740602 C6.42040816,5.4509492 6.60132167,5.62406015 6.8244898,5.62406015 C7.04765792,5.62406015 7.22857143,5.4509492 7.22857143,5.23740602 L7.22857143,3.69078947 C7.22857143,3.47724629 7.04765792,3.30413534 6.8244898,3.30413534 C6.15529314,3.30342504 5.61298721,2.78450803 5.6122449,2.14417293 C5.6122449,1.93062975 5.43133139,1.7575188 5.20816327,1.7575188 L3.59183673,1.7575188 C3.36866861,1.7575188 3.1877551,1.93062975 3.1877551,2.14417293 C3.18701279,2.78450803 2.64470686,3.30342504 1.9755102,3.30413534 C1.75234208,3.30413534 1.57142857,3.47724629 1.57142857,3.69078947 L1.57142857,5.23740602 C1.57142857,5.33995307 1.61400134,5.43830006 1.68978134,5.51081178 C1.76556135,5.58332349 1.86834109,5.62406015 1.9755102,5.62406015 Z",id:"Path",fill:"#FFFFFF"}),(0,t.jsx)("path",{d:"M3.20571429,13.3054511 C3.20571429,13.5281298 3.38863795,13.7086466 3.61428571,13.7086466 L5.24857143,13.7086466 C5.4742192,13.7086466 5.65714286,13.5281298 5.65714286,13.3054511 C5.65714286,13.0827724 5.4742192,12.9022556 5.24857143,12.9022556 L3.98179571,12.9022556 C3.81653233,12.1112194 3.19015481,11.4930837 2.38857143,11.3299948 L2.38857143,9.54229323 C2.38857143,9.31961451 2.20564777,9.13909774 1.98,9.13909774 C1.75435223,9.13909774 1.57142857,9.31961451 1.57142857,9.54229323 L1.57142857,11.6926692 C1.57142857,11.9153479 1.75435223,12.0958647 1.98,12.0958647 C2.65663217,12.0966053 3.20496372,12.637722 3.20571429,13.3054511 L3.20571429,13.3054511 Z",id:"Path",fill:"#FFFFFF"})]})})})}),{registerBlockType:P}=wp.blocks;P(N,{icon:S,edit:({className:e})=>{const o=s();return(0,t.jsxs)("div",{...o,children:[(0,t.jsx)(L,{children:(0,t.jsx)(r,{})}),(0,t.jsx)(i,{children:(0,t.jsx)("div",{id:"gutenpride-controls",children:(0,t.jsx)("a",{href:"admin.php?page=wc-settings&tab=wpslash_tipping",children:"Configure Tipping Settings"})})},"settings")]})},save:e=>(0,t.jsx)("div",{...s.save()})})})();